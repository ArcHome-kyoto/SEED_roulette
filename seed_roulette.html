<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>SEED æŠ½é¸ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</title>
<style>
    body {
        font-family: "Noto Sans JP", sans-serif;
        text-align: center;
        background: #fafafa;
    }
    h1 { font-size: 32px; margin-top: 20px; }

    #roulette {
        margin: 20px auto;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        border: 8px solid #333;
        position: relative;
        overflow: hidden;
    }

    #rouletteList {
        position: absolute;
        width: 100%;
        height: 100%;
        animation: spin 0.2s linear infinite;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 28px;
        color: #444;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    .btn {
        padding: 10px 25px;
        font-size: 20px;
        margin: 10px;
        cursor: pointer;
    }

    #winnerBox {
        margin-top: 20px;
        font-size: 26px;
        font-weight: bold;
        color: #d11;
    }

    /* ç´™å¹é›ª */
    .confetti {
        position: fixed;
        width: 10px;
        height: 10px;
        background: hsl(var(--hue), 70%, 60%);
        top: -20px;
        animation: fall 3s linear forwards;
        opacity: 0.9;
    }
    @keyframes fall {
        to {
            transform: translateY(110vh) rotate(720deg);
        }
    }

    #prizeImage {
        max-width: 200px;
        margin-top: 10px;
    }
</style>
</head>
<body>

<h1>ğŸ‰ SEED æŠ½é¸ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ ğŸ‰</h1>

<!-- æ™¯å“ç”»åƒ -->
<input type="file" id="imageUploader" accept="image/*"><br>
<img id="prizeImage">

<!-- ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç† -->
<h3>ãƒ¡ãƒ³ãƒãƒ¼ï¼ˆè¿½åŠ å¯èƒ½ï¼‰</h3>
<input type="text" id="newMember" placeholder="è¿½åŠ ã™ã‚‹åå‰">
<button onclick="addMember()">è¿½åŠ </button>

<ul id="memberList"></ul>

<!-- å½“é¸äººæ•° -->
<h3>ä»Šå›ã®å½“é¸äººæ•°ï¼š</h3>
<input type="number" id="numWinners" value="1" min="1" max="25">

<div id="roulette">
    <div id="rouletteList">---</div>
</div>

<button class="btn" onclick="startRoulette()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
<button class="btn" onclick="stopRoulette()">ã‚¹ãƒˆãƒƒãƒ—</button>

<div id="winnerBox"></div>

<audio id="bgm" loop>
    <source src="https://files.catbox.moe/7k5t9n.mp3">
</audio>

<script>
/* ==========================
    åˆæœŸãƒ¡ãƒ³ãƒãƒ¼ï¼ˆ25åï¼‰
========================== */
let members = [
    "çŸ³å·", "äº•ä¸Š", "ä¸Šå¹³", "å†…æµ·", "å‹ç”°",
    "é–€é‡", "è¨±", "å°æ± ", "è¿‘è—¤", "æ–‰å°¾",
    "ç ‚åŸ", "å¤§é»’", "ç«¹å†…", "ç«¹æ²»", "å¯ºæœ¬", "ä¸­å·",
    "è¥¿å°¾", "æœéƒ¨", "æ¨‹å¯Œ", "å¹³æ¾¤", "è—¤é‡",
    "æ·µæœ¬", "Yuuki", "å±±ä¸‹", "å‰ç”°"
];

let availableMembers = [...members]; // æ–¹å¼B â†’ A â†’ A é‡è¤‡ãªã—

function renderMemberList() {
    let list = document.getElementById("memberList");
    list.innerHTML = "";
    availableMembers.forEach((name, index) => {
        list.innerHTML += `<li>${name}</li>`;
    });
}
renderMemberList();

/* ãƒ¡ãƒ³ãƒãƒ¼è¿½åŠ  */
function addMember() {
    const name = document.getElementById("newMember").value.trim();
    if (!name) return;
    availableMembers.push(name);
    members.push(name);
    renderMemberList();
    document.getElementById("newMember").value = "";
}

/* BGM */
const bgm = document.getElementById("bgm");

let spinning = false;

/* ã‚¹ã‚¿ãƒ¼ãƒˆ */
function startRoulette() {
    if (availableMembers.length === 0) {
        alert("æ®‹ã‚Šãƒ¡ãƒ³ãƒãƒ¼ãŒã„ã¾ã›ã‚“ï¼");
        return;
    }
    spinning = true;
    document.getElementById("rouletteList").style.animation = "spin 0.2s linear infinite";
    bgm.play();
}

/* ã‚¹ãƒˆãƒƒãƒ—ï¼ˆå¾ã€…ã«æ¸›é€Ÿ â†’ å½“é¸ï¼‰ */
function stopRoulette() {
    if (!spinning) return;
    spinning = false;

    let speed = 200;
    let interval = setInterval(() => {
        speed += 150;
        document.getElementById("rouletteList").style.animation = `spin ${speed}ms linear infinite`;

        if (speed > 3000) {
            clearInterval(interval);
            chooseWinner();
        }
    }, 300);
}

/* å½“é¸å‡¦ç† */
function chooseWinner() {
    const num = Number(document.getElementById("numWinners").value);

    if (num > availableMembers.length) {
        alert("æ®‹ã‚Šäººæ•°ã‚ˆã‚Šå¤šã„å½“é¸æ•°ã¯è¨­å®šã§ãã¾ã›ã‚“");
        return;
    }

    let winners = [];
    for (let i = 0; i < num; i++) {
        const index = Math.floor(Math.random() * availableMembers.length);
        winners.push(availableMembers[index]);
        availableMembers.splice(index, 1);
    }

    document.getElementById("winnerBox").innerText =
        "ğŸŠ å½“é¸ï¼š" + winners.join("ã€ ") + " ğŸŠ";

    confetti();
    renderMemberList();
}

/* ç´™å¹é›ªæ¼”å‡º */
function confetti() {
    for (let i = 0; i < 150; i++) {
        const c = document.createElement("div");
        c.className = "confetti";
        c.style.left = Math.random() * 100 + "vw";
        c.style.setProperty("--hue", Math.random() * 360);
        document.body.appendChild(c);
        setTimeout(() => c.remove(), 3000);
    }
}

/* æ™¯å“ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ */
document.getElementById("imageUploader").addEventListener("change", function(e){
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload = function() {
        document.getElementById("prizeImage").src = reader.result;
    };
    reader.readAsDataURL(file);
});
</script>

</body>
</html>
